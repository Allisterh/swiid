From: postbox@lisdatacenter.org
Subject: job 468594 market_hh
Date: June 26, 2017 at 9:08:15 PM CDT
To: fsolt@mac.com

############################### NOTICE TO USERS ###############################
                                                                        
  Use of the data in the LUXEMBOURG INCOME STUDY DATABASE is governed by
  regulations which do not allow copying or further distribution of the 
  survey microdata.                                                     

  Anyone violating these regulations will lose all privileges to the    
  databases and may be subject to prosecution under the law. In addition,
  any attempt to circumvent the LIS processing system or unauthorized entry
  into the LIS computing system will result in prosecution.             

  All papers written using the LUXEMBOURG INCOME STUDY DATABASE must be 
  submitted for entry into the Working Papers Series.                   
  Please consult our web site for more information at WWW.LISDATACENTER.ORG
                                                                        
############################### NOTICE TO USERS ###############################


. local country "au at be br ca cl cn co cz dk do eg ee fi fr de ge gr gt hu in ie il it is jp lu mx nl no pa py pe pl ro ru rs sk s
> i za kr es se ch tw uk us uy"    

.  
. local yr1 "67 69 71 73 74 75 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 00 01 02 03 04 05 06 07 08 09 10 11
>  12 13 14"    

.  
. capture program drop make_variables   

.  
. program define make_variables   
  1.  sum dhi [w=hpopwgt], de 
  2.  local topline = 10*r(p50) 
  3.  
.  gen dhi_tb = dhi   
  4.  replace dhi_tb = 0 if dhi<0   
  5.  replace dhi_tb = 10*r(p50) if dhi>`topline'  
  6.  gen disp_hh = dhi_tb 
  7.  gen disp_sqrt = dhi_tb/(nhhmem^0.5) 
  8.  gen disp_pc = dhi_tb/nhhmem   
  9.  
.  gen mi_tb = factor + hitp 
 10.  qui replace mi = factor if factor!=. & hitp==. 
 11.  replace mi_tb = 0 if mi_tb<0   
 12.  replace mi_tb = 10*r(p50) if mi_tb>`topline'  
 13.  gen market_hh = mi_tb 
 14.  gen market_sqrt = mi_tb/(nhhmem^0.5) 
 15.  gen market_pc = mi_tb/nhhmem  
 16.   
.  gen hc_tb = hc   
 17.  sum hc [w=hpopwgt], de   
 18.  replace hc_tb = 0 if hc<0   
 19.  replace hc_tb = 10*r(p50) if hc>10*r(p50)  
 20.  gen con_hh = hc_tb 
 21.  gen con_sqrt = hc_tb/(nhhmem^0.5) 
 22.  gen con_pc = hc_tb/nhhmem   
 23.  
.  gen target = market_hh 
 24.   
.  gen wt = hpopwgt   
 25. end   

.  
. foreach c of local country {   
  2.   foreach year of local yr1 {   
  3.     local file "`c'`year'h"   
  4.     capture confirm file $`file'   
  5.     if !_rc {   
  6.       qui use dhi factor hitp hc hpopwgt nhhmem grossnet using $`file', clear   
  7.       qui make_variables   
  8.       qui sum target  
  9.       if r(N)>0 & r(mean)!=0 {   
 10.         set seed 324   
 11.         version 7 : quietly bs "ineqdec0 target [aw=wt]" "S_gini", reps(500) nowarn   
 12.         local gini = round(r(stat), .001)   
 13.         local se = round(r(se), .001) 
 14.      qui sum grossnet 
 15.      local gn = r(mean) 
 16.         display "`c'`year', market_hh, `gini', `se', `gn'"   
 17.       }   
 18.     }   
 19.   }   
 20. }  
au81, market_hh, .463, .003, 120
au85, market_hh, .494, .005, 120
au89, market_hh, .492, .003, 120
au95, market_hh, .54, .005, 120
au01, market_hh, .55, .005, 120
au03, market_hh, .539, .004, 120
au08, market_hh, .532, .005, 120
au10, market_hh, .543, .004, 120
at87, market_hh, 0, 0, 320
at94, market_hh, .642, .008, 200
at95, market_hh, 0, 0, 320
at97, market_hh, .603, .01, 200
at00, market_hh, .648, .009, 200
at04, market_hh, .544, .006, 110
at07, market_hh, .5700000000000001, .005, 110
at10, market_hh, .5760000000000001, .005, 110
at13, market_hh, .578, .005, 110
be85, market_hh, .499, .005, 200
be88, market_hh, .509, .007, 200
be92, market_hh, .539, .006, 120
be95, market_hh, .6960000000000001, .006, 200
be97, market_hh, .5680000000000001, .006, 120
be00, market_hh, .6760000000000001, .006, 200
br06, market_hh, .613, .001, 120
br09, market_hh, .613, .001, 120
br11, market_hh, .63, .001, 120
br13, market_hh, .63, .001, 120
ca71, market_hh, .481, .003, 100
ca75, market_hh, .459, .002, 100
ca81, market_hh, .446, .003, 100
ca87, market_hh, .467, .005, 100
ca91, market_hh, .492, .004, 100
ca94, market_hh, .516, .002, 100
ca97, market_hh, .522, .003, 100
ca98, market_hh, .548, .003, 100
ca00, market_hh, .537, .003, 100
ca04, market_hh, .546, .003, 100
ca07, market_hh, .541, .003, 110
ca10, market_hh, .5520000000000001, .003, 110
cn02, market_hh, .497, .003, 300
co04, market_hh, .5660000000000001, .004, 100
co07, market_hh, .585, .003, 310
co10, market_hh, .582, .003, 310
co13, market_hh, .588, .003, 310
cz92, market_hh, .505, .003, 100
cz96, market_hh, .524, .002, 100
cz02, market_hh, .544, .004, 120
cz04, market_hh, .546, .006, 100
cz07, market_hh, .536, .004, 100
cz10, market_hh, .531, .004, 100
cz13, market_hh, .545, .004, 100
dk87, market_hh, .528, .003, 110
dk92, market_hh, .5550000000000001, .003, 110
dk95, market_hh, .5510000000000001, .001, 110
dk00, market_hh, .544, .001, 110
dk04, market_hh, .5530000000000001, .001, 110
dk07, market_hh, .543, .001, 110
dk10, market_hh, .5730000000000001, .001, 110
dk13, market_hh, .584, .001, 110
do07, market_hh, .519, .006, 110
eg12, market_hh, .536, .004, 200
ee00, market_hh, .5750000000000001, .006, 320
ee04, market_hh, .584, .007, 100
ee07, market_hh, .5640000000000001, .006, 120
ee10, market_hh, .589, .007, 120
ee13, market_hh, .634, .005, 120
fi87, market_hh, .494, .004, 110
fi91, market_hh, .512, .004, 110
fi95, market_hh, .5730000000000001, .005, 110
fi00, market_hh, .5580000000000001, .004, 110
fi04, market_hh, .5640000000000001, .004, 110
fi07, market_hh, .5620000000000001, .005, 110
fi10, market_hh, .5730000000000001, .005, 110
fi13, market_hh, .586, .004, 110
fr78, market_hh, .65, .003, 320
fr84, market_hh, .627, .004, 320
fr89, market_hh, .638, .004, 320
fr94, market_hh, .5600000000000001, .004, 320
fr00, market_hh, .5550000000000001, .004, 320
fr05, market_hh, .5550000000000001, .004, 320
fr10, market_hh, .5680000000000001, .004, 320
de73, market_hh, .471, .002, 100
de78, market_hh, .513, .002, 100
de81, market_hh, .505, .009, 100
de83, market_hh, .508, .002, 100
de84, market_hh, .537, .006, 120
de89, market_hh, .533, .007, 120
de94, market_hh, .541, .006, 120
de00, market_hh, .55, .004, 120
de04, market_hh, .5690000000000001, .004, 120
de07, market_hh, .589, .005, 120
de10, market_hh, .595, .004, 120
de13, market_hh, .597, .004, 120
ge10, market_hh, .61, .005, 200
ge13, market_hh, .5750000000000001, .008, 200
gr95, market_hh, .5730000000000001, .007, 200
gr00, market_hh, .5690000000000001, .008, 200
gr04, market_hh, .536, .006, 200
gr07, market_hh, .5750000000000001, .005, 120
gr10, market_hh, .627, .007, 120
gr13, market_hh, .637, .005, 120
gt06, market_hh, .523, .005, 110
gt11, market_hh, .514, .004, 120
gt14, market_hh, .484, .004, 120
hu91, market_hh, .5550000000000001, .009, 200
hu94, market_hh, .626, .009, 200
hu99, market_hh, .6880000000000001, .006, 200
hu05, market_hh, .629, .008, 200
hu07, market_hh, .67, .008, 200
hu09, market_hh, .704, .008, 200
hu12, market_hh, .722, .007, 200
in04, market_hh, .504, .002, 200
in11, market_hh, .521, .002, 200
ie87, market_hh, .5700000000000001, .008, 100
ie94, market_hh, .5720000000000001, .01, 200
ie95, market_hh, .5630000000000001, .01, 200
ie96, market_hh, .5590000000000001, .012, 200
ie00, market_hh, .656, .007, 200
ie04, market_hh, .5740000000000001, .006, 110
ie07, market_hh, .5730000000000001, .007, 110
ie10, market_hh, .626, .007, 110
il79, market_hh, .469, .008, 100
il86, market_hh, .518, .005, 100
il92, market_hh, .523, .005, 100
il97, market_hh, .548, .005, 100
il01, market_hh, .577, .005, 100
il05, market_hh, .5590000000000001, .004, 100
il07, market_hh, .5570000000000001, .005, 120
il10, market_hh, .5540000000000001, .005, 120
il12, market_hh, .539, .004, 120
it86, market_hh, .497, .006, 200
it87, market_hh, .528, .007, 200
it89, market_hh, .508, .006, 200
it91, market_hh, .495, .007, 200
it93, market_hh, .548, .006, 200
it95, market_hh, .5520000000000001, .006, 200
it98, market_hh, .5640000000000001, .008, 200
it00, market_hh, .5580000000000001, .006, 200
it04, market_hh, .5720000000000001, .006, 310
it08, market_hh, .5560000000000001, .006, 310
it10, market_hh, .5740000000000001, .007, 310
it14, market_hh, .5760000000000001, .006, 310
is04, market_hh, .461, .008, 110
is07, market_hh, .455, .007, 110
is10, market_hh, .493, .007, 110
jp08, market_hh, .485, .006, 120
lu85, market_hh, .467, .009, 200
lu91, market_hh, .458, .012, 200
lu94, market_hh, .467, .01, 200
lu97, market_hh, .506, .008, 200
lu00, market_hh, .516, .01, 200
lu04, market_hh, .516, .008, 110
lu07, market_hh, .525, .01, 100
lu10, market_hh, .523, .007, 100
lu13, market_hh, .539, .007, 100
mx84, market_hh, .45, .009, 200
mx89, market_hh, .47, .005, 200
mx92, market_hh, .493, .005, 200
mx94, market_hh, .506, .005, 200
mx96, market_hh, .485, .004, 200
mx98, market_hh, .507, .005, 200
mx00, market_hh, .505, .006, 200
mx02, market_hh, .502, .005, 200
mx04, market_hh, .496, .003, 200
mx08, market_hh, .514, .003, 200
mx10, market_hh, .508, .003, 200
mx12, market_hh, .505, .005, 200
nl83, market_hh, .5550000000000001, .009, 100
nl87, market_hh, .5620000000000001, .007, 100
nl90, market_hh, .539, .006, 100
nl93, market_hh, .538, .006, 100
nl99, market_hh, .635, .004, 100
nl04, market_hh, .5520000000000001, .005, 100
nl07, market_hh, .5590000000000001, .005, 110
nl10, market_hh, .5580000000000001, .005, 110
nl13, market_hh, .5750000000000001, .005, 110
no79, market_hh, .476, .004, 110
no86, market_hh, .474, .005, 110
no91, market_hh, .502, .006, 110
no95, market_hh, .529, .005, 110
no00, market_hh, .53, .004, 110
no04, market_hh, .55, .004, 110
no07, market_hh, .54, .001, 110
no10, market_hh, .5510000000000001, .001, 110
no13, market_hh, .548, .001, 110
pa07, market_hh, .545, .004, 120
pa10, market_hh, .541, .004, 120
pa13, market_hh, .5510000000000001, .004, 120
py10, market_hh, .495, .005, 200
py13, market_hh, .502, .006, 200
pe04, market_hh, .612, .003, 110
pe07, market_hh, .5760000000000001, .003, 110
pe10, market_hh, .5690000000000001, .003, 110
pe13, market_hh, .5530000000000001, .003, 110
pl86, market_hh, .459, .004, 200
pl92, market_hh, .478, .005, 200
pl95, market_hh, .6, .002, 320
pl99, market_hh, .549, .002, 100
pl04, market_hh, .603, .002, 100
pl07, market_hh, .5700000000000001, .002, 110
pl10, market_hh, .5580000000000001, .002, 110
pl13, market_hh, .5620000000000001, .002, 110
ro95, market_hh, .451, .002, 100
ro97, market_hh, .448, .002, 100
ru00, market_hh, .651, .005, 200
ru04, market_hh, .637, .006, 200
ru07, market_hh, .646, .005, 200
ru10, market_hh, .623, .005, 200
ru13, market_hh, .645, .004, 200
rs06, market_hh, .5590000000000001, .006, 200
rs10, market_hh, .619, .006, 200
rs13, market_hh, .624, .006, 200
sk92, market_hh, .502, .003, 100
sk96, market_hh, .518, .004, 200
sk04, market_hh, .577, .006, 110
sk07, market_hh, .585, .006, 110
sk10, market_hh, .534, .005, 110
sk13, market_hh, .527, .006, 110
si97, market_hh, .472, .008, 200
si99, market_hh, .479, .006, 200
si04, market_hh, .51, .007, 200
si07, market_hh, .507, .006, 200
si10, market_hh, .533, .007, 200
si12, market_hh, .5560000000000001, .007, 200
za08, market_hh, .662, .004, 120
za10, market_hh, .636, .006, 120
za12, market_hh, .64, .005, 120
kr06, market_hh, .39, .003, 110
kr08, market_hh, .41, .003, 110
kr10, market_hh, .413, .004, 110
kr12, market_hh, .415, .004, 110
es80, market_hh, .48, .003, 200
es85, market_hh, .489, .007, 200
es90, market_hh, .492, .003, 200
es95, market_hh, .592, .006, 200
es00, market_hh, .625, .007, 200
es04, market_hh, .514, .004, 200
es07, market_hh, .531, .005, 110
es10, market_hh, .604, .004, 110
es13, market_hh, .578, .004, 110
se67, market_hh, .52, .005, 110
se75, market_hh, .494, .006, 110
se81, market_hh, .51, .006, 110
se87, market_hh, .526, .006, 110
se92, market_hh, .5520000000000001, .004, 110
se95, market_hh, .577, .003, 110
se00, market_hh, .5630000000000001, .003, 110
se05, market_hh, .5560000000000001, .003, 110
ch82, market_hh, .476, .005, 100
ch92, market_hh, .471, .006, 100
ch00, market_hh, .443, .007, 100
ch02, market_hh, .451, .006, 100
ch04, market_hh, .456, .007, 100
ch07, market_hh, .474, .005, 110
ch10, market_hh, .478, .005, 110
ch13, market_hh, .492, .005, 110
tw81, market_hh, .29, .002, 100
tw86, market_hh, .305, .002, 100
tw91, market_hh, .315, .002, 100
tw95, market_hh, .37, .002, 100
tw97, market_hh, .354, .003, 100
tw00, market_hh, .366, .003, 100
tw05, market_hh, .385, .002, 100
tw07, market_hh, .391, .002, 110
tw10, market_hh, .394, .002, 110
tw13, market_hh, .401, .002, 110
uk69, market_hh, .422, .004, 100
uk74, market_hh, .448, .004, 100
uk79, market_hh, .489, .004, 100
uk86, market_hh, .5680000000000001, .004, 100
uk91, market_hh, .5620000000000001, .004, 100
uk94, market_hh, .6, .002, 100
uk95, market_hh, .595, .005, 100
uk99, market_hh, .593, .002, 100
uk04, market_hh, .604, .002, 100
uk07, market_hh, .588, .002, 110
uk10, market_hh, .608, .002, 110
uk13, market_hh, .602, .003, 110
us74, market_hh, .471, .003, 120
us79, market_hh, .484, .002, 120
us86, market_hh, .507, .002, 120
us91, market_hh, .514, .002, 120
us94, market_hh, .534, .002, 120
us97, market_hh, .528, .002, 120
us00, market_hh, .525, .001, 120
us04, market_hh, .539, .002, 120
us07, market_hh, .533, .002, 120
us10, market_hh, .5580000000000001, .002, 120
us13, market_hh, .5620000000000001, .002, 120
uy04, market_hh, .577, .003, 200
uy07, market_hh, .5620000000000001, .002, 200
uy10, market_hh, .547, .002, 200
uy13, market_hh, .513, .002, 200

. 
end of do-file


