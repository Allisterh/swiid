From: postbox@lisdatacenter.org
Subject: job 460194 con_sqrt
Date: May 17, 2017 at 7:15:21 AM CDT
To: fsolt@mac.com

############################### NOTICE TO USERS ###############################
                                                                        
  Use of the data in the LUXEMBOURG INCOME STUDY DATABASE is governed by
  regulations which do not allow copying or further distribution of the 
  survey microdata.                                                     

  Anyone violating these regulations will lose all privileges to the    
  databases and may be subject to prosecution under the law. In addition,
  any attempt to circumvent the LIS processing system or unauthorized entry
  into the LIS computing system will result in prosecution.             

  All papers written using the LUXEMBOURG INCOME STUDY DATABASE must be 
  submitted for entry into the Working Papers Series.                   
  Please consult our web site for more information at WWW.LISDATACENTER.ORG
                                                                        
############################### NOTICE TO USERS ###############################


. local country "au at be br ca cl cn co cz dk do eg ee fi fr de ge gr gt hu in ie il it is jp lu mx nl no pa py pe pl ro ru rs sk s
> i za kr es se ch tw uk us uy"    

.  
. local yr1 "67 69 71 73 74 75 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 00 01 02 03 04 05 06 07 08 09 10 11
>  12 13 14"    

.  
. capture program drop make_variables   

.  
. program define make_variables   
  1.  sum dhi [w=hpopwgt], de 
  2.  local topline = 10*r(p50) 
  3.  
.  gen dhi_tb = dhi   
  4.  replace dhi_tb = 0 if dhi<0   
  5.  replace dhi_tb = 10*r(p50) if dhi>`topline'  
  6.  gen disp_hh = dhi_tb 
  7.  gen disp_sqrt = dhi_tb/(nhhmem^0.5) 
  8.  gen disp_pc = dhi_tb/nhhmem   
  9.  
.  gen mi_tb = factor + hitp 
 10.  replace mi_tb = 0 if mi<0   
 11.  replace mi_tb = 10*r(p50) if mi>`topline'  
 12.  gen market_hh = mi_tb 
 13.  gen market_sqrt = mi_tb/(nhhmem^0.5) 
 14.  gen market_pc = mi_tb/nhhmem  
 15.   
.  gen hc_tb = hc   
 16.  sum hc [w=hpopwgt], de   
 17.  replace hc_tb = 0 if hc<0   
 18.  replace hc_tb = 10*r(p50) if hc>10*r(p50)  
 19.  gen con_hh = hc_tb 
 20.  gen con_sqrt = hc_tb/(nhhmem^0.5) 
 21.  gen con_pc = hc_tb/nhhmem   
 22.  
.  gen target = con_sqrt 
 23.   
.  gen wt = hpopwgt*nhhmem   
 24. end   

.  
. foreach c of local country {   
  2.   foreach year of local yr1 {   
  3.     local file "`c'`year'h"   
  4.     capture confirm file $`file'   
  5.     if !_rc {   
  6.       qui use dhi factor hitp hc hpopwgt nhhmem grossnet using $`file', clear   
  7.       qui make_variables   
  8.       qui sum target  
  9.       if r(N)>0 & r(mean)!=0 {   
 10.         set seed 324   
 11.         version 7 : quietly bs "ineqdec0 target [aw=wt]" "S_gini", reps(500) nowarn   
 12.         local gini = round(r(stat), .001)   
 13.         local se = round(r(se), .001) 
 14.      qui sum grossnet 
 15.      local gn = r(mean) 
 16.         display "`c'`year', con_sqrt, `gini', `se', `gn'"   
 17.       }   
 18.     }   
 19.   }   
 20. }  
au10, con_sqrt, .492, .003, 120
do07, con_sqrt, .5680000000000001, .003, 110
ee00, con_sqrt, .498, .005, 320
fr00, con_sqrt, .326, .004, 320
fr05, con_sqrt, .285, .002, 320
fr10, con_sqrt, .49, .004, 320
gt06, con_sqrt, .527, .004, 110
hu91, con_sqrt, .273, .006, 200
hu94, con_sqrt, .347, .013, 200
il92, con_sqrt, .324, .004, 100
il97, con_sqrt, .336, .004, 100
il01, con_sqrt, .295, .003, 100
il05, con_sqrt, .308, .004, 100
il07, con_sqrt, .35, .006, 120
il10, con_sqrt, .351, .007, 120
il12, con_sqrt, .343, .006, 120
mx84, con_sqrt, .425, .009, 200
mx89, con_sqrt, .431, .005, 200
mx92, con_sqrt, .443, .005, 200
mx94, con_sqrt, .447, .005, 200
mx96, con_sqrt, .423, .005, 200
mx98, con_sqrt, .444, .005, 200
mx00, con_sqrt, .459, .008, 200
mx02, con_sqrt, .439, .006, 200
mx04, con_sqrt, .425, .004, 200
mx08, con_sqrt, .391, .003, 200
mx10, con_sqrt, .395, .003, 200
mx12, con_sqrt, .393, .006, 200
pe04, con_sqrt, .414, .005, 110
pe07, con_sqrt, .407, .003, 110
pe10, con_sqrt, .367, .003, 110
pe13, con_sqrt, .352, .003, 110
rs06, con_sqrt, .508, .006, 200
rs10, con_sqrt, .449, .007, 200
rs13, con_sqrt, .437, .007, 200
si07, con_sqrt, .419, .01, 200
si10, con_sqrt, .418, .01, 200
si12, con_sqrt, .23, .004, 200
za08, con_sqrt, .579, .004, 120
za10, con_sqrt, .604, .004, 120
za12, con_sqrt, .5730000000000001, .006, 120
es85, con_sqrt, .316, .008, 200
es90, con_sqrt, .315, .003, 200
tw81, con_sqrt, .225, .002, 100
tw86, con_sqrt, .229, .002, 100
tw91, con_sqrt, .242, .002, 100
tw95, con_sqrt, .245, .002, 100
tw97, con_sqrt, .229, .002, 100
tw00, con_sqrt, .226, .002, 100
tw05, con_sqrt, .221, .002, 100
tw07, con_sqrt, .211, .002, 110
tw10, con_sqrt, .218, .002, 110
tw13, con_sqrt, .218, .002, 110
uk86, con_sqrt, .318, .003, 100
uk91, con_sqrt, .341, .004, 100

. 
end of do-file


